<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlataformaBizurada - A Plataforma do concurseiro!</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link rel="icon" href="./ico.png" type="image/png">

    <meta name="theme-color" content="#764ba2">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">


</head>
<style>

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

/* Bot√£o para abrir o player */
.open-btn {
    background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 50px;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
}

.open-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
}

.open-btn i {
    font-size: 20px;
}

/* Pop-up Overlay */
/* Pop-up Overlay */
.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Fundo gradiente */
    background: linear-gradient(90deg, #000000 0%, #8d61b9 100%);
    /* Blur atr√°s do overlay */
    backdrop-filter: blur(10px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.3s ease;
}
/* Input de pesquisa da playlist */
.playlist-search {
    padding: 10px 15px;
    width: 100%;
    display: flex;
    justify-content: center;
}

.playlist-search input {
    width: 100%;
    padding: 10px 15px;
    border-radius: 25px;
    border: 2px solid transparent;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 14px;
    outline: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2) inset;
}

.playlist-search input::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

.playlist-search input:focus {
    border-color: #3498db;
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
}


.popup-overlay.active {
    display: flex;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
/* Container do Player */
.popup-container {
  background-color: transparent;
  width: 100%;
  max-width: 500px;
  height: 100vh;
  overflow-y: scroll; /* mant√©m o scroll funcional */
  animation: slideUp 0.4s ease;
  color: white;

  /* Firefox */
  scrollbar-width: none; 
  padding: 0px;
}

/* Chrome, Edge, Safari */
.popup-container::-webkit-scrollbar {
  display: none;
}


@keyframes slideUp {
    from {
        transform: translateY(50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Header do Player */
.player-header {
    display: none;
    justify-content: center;
    text-align: center;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 30px;
}
.player-header p {
  margin-left: 30px;
}
.player-header h2 {
    font-size: 24px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.close-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    display: none;
    align-items: center;
    justify-content: center;
}

.close-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
}

/* Categorias */
.categories {
    display: flex;
    padding: 20px;
    gap: 10px;
    flex-wrap: wrap;
}

.category-btn {
    flex: 1;
    min-width: 120px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid transparent;
    color: white;
    padding: 15px 10px;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    font-weight: 500;
}

.category-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.category-btn.active {
    background: linear-gradient(45deg, #3498db, #2980b9);
    border-color: #3498db;
    box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
}

.category-btn i {
    font-size: 24px;
}

.category-btn span {
    font-size: 12px;
    text-align: center;
}

/* Container do V√≠deo */
.video-container {
    position: relative;
    padding: 20px;
    padding-bottom: 0;
    display: none;
}

#youtube-player {
    width: 100%;
    height: 200px;
    border-radius: 15px;
    overflow: hidden;
}

.video-overlay {
    position: absolute;
    bottom: 20px;
    left: 20px;
    right: 20px;
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    padding: 20px;
    border-radius: 0 0 15px 15px;
    pointer-events: none;
}
.current-track {
width: 100%;
justify-content: center;
text-align: center;
align-items: center;
margin-bottom: 20px;
}
.current-track h3 {
    font-size: 18px;
    margin-bottom: 5px;
    font-weight: 600;
    transition: opacity 0.3s ease;
}

.current-track p {
    font-size: 14px;
    opacity: 0.8;
    transition: opacity 0.3s ease;
}

/* Controles do Player */
.player-controls {
    padding: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.main-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
}

.control-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

.control-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
}

.play-pause {
    width: 60px;
    height: 60px;
    background: linear-gradient(45deg, #e74c3c, #c0392b);
    font-size: 24px;
}

.play-pause:hover {
    background: linear-gradient(45deg, #c0392b, #a93226);
}

/* Barra de Progresso */
.progress-container {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.progress-container span {
    font-size: 12px;
    min-width: 35px;
    text-align: center;
}

.progress-bar {
    flex: 1;
    height: 6px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    overflow: hidden;
    cursor: pointer;
}

.progress {
    height: 100%;
    background: linear-gradient(45deg, #3498db, #2980b9);
    width: 0%;
    transition: width 0.1s ease;
}

/* Controles de Volume */
.volume-controls {
    display: flex;
    align-items: center;
    gap: 15px;
}

.volume-slider {
    flex: 1;
}

.volume-slider input[type="range"] {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    outline: none;
    -webkit-appearance: none;
}

.volume-slider input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background: #3498db;
    border-radius: 50%;
    cursor: pointer;
}

.volume-slider input[type="range"]::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: #3498db;
    border-radius: 50%;
    cursor: pointer;
    border: none;
}

/* Playlist */
.playlist-container {
    padding: 0px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    width: 100%;
    height: 420px;
    margin: 0px;
}

.playlist-container h4 {
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 16px;
}

.playlist {
    height: 180px;
    overflow-y: auto;

    /* Scrollbar discreta */
    scrollbar-color: rgba(255,255,255,0.3) transparent; /* Firefox */
}

/* Chrome, Edge, Safari */
.playlist::-webkit-scrollbar {
    width: 6px;
}

.playlist::-webkit-scrollbar-track {
    background: transparent;
}

.playlist::-webkit-scrollbar-thumb {
    background-color: rgba(255,255,255,0.3);
    border-radius: 3px;
}

.playlist::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255,255,255,0.5);
}

.playlist-item {
    display: flex;
    align-items: center;
    padding: 10px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 5px;
}

.playlist-item:hover {
    background: rgba(255, 255, 255, 0.1);
}

.playlist-item.active {
    background: linear-gradient(45deg, #3498db, #2980b9);
}

.playlist-item .track-info {
    flex: 1;
}

.playlist-item .track-title {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 2px;
}

.playlist-item .track-duration {
    font-size: 12px;
    opacity: 0.7;
}
.divNome{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  margin-top: 10px;
  margin-bottom: 5px;
}
/* Responsividade */
@media (max-width: 600px) {
    .popup-container {
        width: 100%;
    }
    
  
    
    .category-btn {
        min-width: auto;
    }
    
    .main-controls {
        gap: 15px;
    }
    
    .control-btn {
        width: 45px;
        height: 45px;
    }
    
    .play-pause {
        width: 55px;
        height: 55px;
    }
}

/* Loading Spinner */
.loading-spinner {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px 20px;
    color: white;
    font-size: 16px;
    gap: 15px;
    min-height: 120px;
    animation: fadeIn 0.3s ease;
     height: 130px;
}

.loading-spinner .spinner {
    border: 4px solid rgba(255, 255, 255, 0.2);
    border-top: 4px solid #3498db;
    border-right: 4px solid #e74c3c;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1.2s linear infinite;
    box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
}

.loading-spinner p {
    font-weight: 500;
    opacity: 0.9;
    text-align: center;
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}

/* Scrollbar personalizada */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

/* Container centralizado */
.voltarSite {
    display: flex;
    justify-content: center;
    align-items: center;
    height: auto; /* ocupa toda a altura da tela */
    margin-top: 10px;
    width: 100%;
    text-align: center;
}

/* Estilo do bot√£o */
.voltarAnavegar {
    display: inline-block;
    padding: 15px 20px;
    font-size: 14px;
    font-weight: bold;
    color: #fff;
    text-decoration: none;
    border-radius: 50px;
    background: linear-gradient(135deg, #4f46e5, #9333ea);
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    cursor: pointer;
    text-align: center;
}

/* Hover / efeito de foco */
.voltarAnavegar:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.4);
    background: linear-gradient(135deg, #9333ea, #4f46e5);
}

/* Ativo / clique */
.voltarAnavegar:active {
    transform: translateY(0);
    box-shadow: 0 5px 10px rgba(0,0,0,0.2);
}
.Mensagem {
  width: 100%;

  
  font-size: 14px;

  display: flex;
  justify-content: center;
  text-align: center;
  background-color: #0869cbe0;
  align-items: center;
  z-index: 1000;
  margin: 0px;
  margin-top: 50px;
}
</style>



<body>
    <!-- Player Container (sem overlay, j√° que √© uma janela popup) -->
    <div class="popup-container" style="display: block;">
        <!-- Header do Player -->
        <div class="player-header">
            <div class="divNome"> 
                <img src="https://firebasestorage.googleapis.com/v0/b/orange-fast.appspot.com/o/mindfulness_brain_transparent.png?alt=media&token=d1407573-6161-4b64-b6b2-e46206ba452f" alt="Mindfulness Logo" style="width: 30px; height: 30px;">
                <h2>PlataformaBizurada</h2>
            </div>
            <p>A Plataforma do concurseiro!</p>
            <button class="close-btn" onclick="window.close()" title="Fechar Player">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
               <!-- Lista de Reprodu√ß√£o -->
         <!-- Lista de Reprodu√ß√£o -->
<div class="playlist-container">
    <div class="divNome">  
        <img src="./favicon.ico">
        <h2> PlataformaBizurada</h2>
        <i class="fas fa-headphones"></i>
    </div>
  <!-- Categorias de M√∫sica -->
            <div class="categories">
                <button class="category-btn active " data-category="Natureza">
                    <i class="fas fa-leaf"></i>
                    <span>Natureza</span>
                </button>
                <button class="category-btn" data-category="Calma">
                    <i class="fas fa-spa"></i>
                    <span>Calma</span>
                </button>
                <button class="category-btn" data-category="Focado">
                    <i class="fas fa-brain"></i>
                    <span>Focado</span>
                </button>
            </div>

    <!-- Input de pesquisa -->
    <div class="playlist-search">
        <input 
            type="text" 
            id="searchInput" 
            placeholder="üîç Buscar m√∫sica em: Natureza..." 
        />
    </div>

    <div id="loadingSpinner" class="loading-spinner" style="display: flex;">
        <div class="spinner"></div>
        <p>Carregando playlist...</p>
    </div>

    <div id="playlist" class="playlist">
        <!-- As m√∫sicas ser√£o carregadas dinamicamente -->
    </div>
</div>  




            <div class="voltarSite">
              <a class="voltarAnavegar" href="https://www.plataformabizurada.com.br" target="_blank"> Voltar a Navegar </a>
            </div>

            
          
         
                    

            <!-- Player de V√≠deo do YouTube -->
            <div class="video-container" style="display: none;">
                <div id="youtube-player"></div>
                <div class="video-overlay">
                    <div class="current-track">
                        <h3 id="trackTitle">Selecione uma categoria</h3>
                        <p id="trackDescription">Escolha uma categoria para come√ßar a ouvir</p>
                    </div>
                </div>
            </div>

            <!-- Controles do Player -->
            <div class="player-controls">
                <div class="main-controls">
                    <button id="prevBtn" class="control-btn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button id="playPauseBtn" class="control-btn play-pause">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="nextBtn" class="control-btn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>

                <div class="progress-container">
                    <span id="currentTime">0:00</span>
                    <div class="progress-bar">
                        <div id="progress" class="progress"></div>
                    </div>
                    <span id="duration">0:00</span>
                </div>

                <div class="volume-controls">
                    <button id="muteBtn" class="control-btn">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <div class="volume-slider">
                        <input type="range" id="volumeSlider" min="0" max="100" value="50">
                    </div>
                </div>
            </div>

      
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js"></script>
</body>


<script> 
///ADICIONAR M√öSICAS
    // Configura√ß√£o das playlists por categoria
const playlists = {
    Natureza: [
        { id: 'h0CJgLE4NiY', title: 'Sons da Natureza', description: 'Sons relaxantes de Cachoeira', duration: '1:00:00' },
        { id: 'lFcSrYw-ARY', title: 'Chuva na Floresta', description: 'Sons relaxantes de chuva', duration: '3:00:00' },
        { id: 'nDq6TstdEi8', title: 'Ondas do Mar', description: 'Som das ondas quebrando', duration: '2:30:00' },
        { id: 'eKFTSSKCzWA', title: 'P√°ssaros Cantando', description: 'Sons de p√°ssaros na natureza', duration: '1:45:00' },
        { id: 'UfcAVejslrU', title: 'Fogueira Crepitante', description: 'Som relaxante de fogueira', duration: '2:15:00' },
        { id: 'wzjWIxXBs_s', title: 'Vento nas √Årvores', description: 'Som suave do vento', duration: '1:30:00' }
    ],
    Calma: [
        { id: 'jfKfPfyJRdk', title: 'Live Infinita - M√∫sica Zen - Melodias Para Relaxamento', description: 'Melodias para relaxamento', duration: '2:00:00' },
        { id: 'jfKfPfyJRdk', title: 'Live Infinita - lofi hip hop radio üìö beats to relax/study to', description: 'lofi hip hop radio üìö beats to relax/study to', duration: '1:20:00' }
    ],

    Focado: [
        { id: 'kbHoOffcSuk', title: '10 m√∫sicas - 1 Hour Chill Country Music', description: '1 Hour Chill Country Music Playlist ‚Äì Relaxing Country Songs to Brighten Your Day', duration: '00:23:52' },

         { id: 'nE0uNEmVnIQ', title: '12 M√∫sicas - Ed Sheeran - Romanct', description: 'Ed Sheeran Full Hits Songs Collection Album 2025 - Ed Sheeran Best Songs Playlist 2025', duration: '01:24:28' },
        
         { id: '1Pl3Y-GAhqE', title: '14 M√∫sicas - Acoustic Hillsong Worship', description: 'Acoustic Hillsong Worship Praise Songs 2020 HILLSONG Praise And Worship Songs Playlist 2020480P', duration: '01:35:38' },
         
         
         { id: 'V7X2ARlm4lY', title: '16 M√∫sicas - Gospel, Louvores e Adora√ß√£o', description: '', duration: '01:46:57' },

           { id: 'YkTYkIzUuzk', title: '7 M√∫sicas - Fernandinho üé§ Louvores', description: '', duration: '00:28:40' },

         { id: '6DcNYIhAY1k', title: '20 M√∫sicas - Eletr√¥nica para Estudar Concentra√ß√£os', description: '', duration: '02:14:43' },

         { id: 'JIMnT2hI4_M', title: '20 M√∫sicas - para come√ßar a semana bem', description: '', duration: '01:39:32' },

    ]
};

// Vari√°veis globaisDOS DIREITOS SOCIAIS - Do art. 6¬∫ ao 11 - CF em √°udio

let player;
let currentCategory = 'Natureza';
let currentTrackIndex = 0;
let isPlaying = false;
let currentVolume = 50;
let isMuted = false;
let progressInterval;

// Elementos DOM
const playerPopup = document.getElementById('playerPopup');
const categoryBtns = document.querySelectorAll('.category-btn');
const playPauseBtn = document.getElementById('playPauseBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const muteBtn = document.getElementById('muteBtn');
const volumeSlider = document.getElementById('volumeSlider');
const progressBar = document.querySelector('.progress-bar');
const progress = document.getElementById('progress');
const currentTimeSpan = document.getElementById('currentTime');
const durationSpan = document.getElementById('duration');
const trackTitle = document.getElementById('trackTitle');
const trackDescription = document.getElementById('trackDescription');
const playlistContainer = document.getElementById('playlist');



categoryBtns.forEach(btn => {
    btn.addEventListener('click', () => changeCategory(btn.dataset.category));
});

playPauseBtn.addEventListener('click', togglePlayPause);
prevBtn.addEventListener('click', previousTrack);
nextBtn.addEventListener('click', nextTrack);
muteBtn.addEventListener('click', toggleMute);
volumeSlider.addEventListener('input', changeVolume);
progressBar.addEventListener('click', seekTo);



function atualizarBotaoVoltar() {
  const ehDesktop = localStorage.getItem("ehDesktop"); 
  const voltarSite = document.querySelector(".voltarSite");

  if (!voltarSite) return; // seguran√ßa caso o elemento n√£o exista

  if (ehDesktop === "sim") {
    voltarSite.style.display = "none";  // esconde no desktop
  } else {
    voltarSite.style.display = "flex"; // mostra no celular
  }
}

// Fun√ß√£o chamada quando a API do YouTube est√° pronta
function onYouTubeIframeAPIReady() {
    player = new YT.Player('youtube-player', {
        height: '200',
        width: '100%',
        videoId: playlists[currentCategory][0].id,
        playerVars: {
            'autoplay': 0,
            'controls': 0,
            'disablekb': 1,
            'fs': 0,
            'modestbranding': 1,
            'rel': 0,
            'showinfo': 0
        },
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    });
}

// Fun√ß√£o chamada quando o player est√° pronto
function onPlayerReady(event) {
    // Mostrar spinner durante carregamento inicial
    showLoadingSpinner();
    
    player.setVolume(currentVolume);
    
    // Simular carregamento inicial
    setTimeout(() => {
        loadPlaylist();
        updateTrackInfo();
        startProgressUpdate();
        hideLoadingSpinner();
    }, 1000);
}

// Fun√ß√£o chamada quando o estado do player muda
function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.ENDED) {
        nextTrack();
    } else if (event.data === YT.PlayerState.PLAYING) {
        isPlaying = true;
        updatePlayPauseButton();
    } else if (event.data === YT.PlayerState.PAUSED) {
        isPlaying = false;
        updatePlayPauseButton();
    }
}


// Fun√ß√£o para mudar categoria
function changeCategory(category) {

    // Verificar se a categoria existe
    if (!playlists[category]) {
        console.error('Categoria n√£o encontrada:', category);
        return;
    }
     
     let searchInput = document.getElementById("searchInput");
    searchInput.value = "";
     searchInput.placeholder  = "üîç Buscar m√∫sica em: " + category + "...";

    currentCategory = category;
    currentTrackIndex = 0;
    
    // Atualizar bot√µes de categoria
    categoryBtns.forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.category === category) {
            btn.classList.add('active');
        }
    });
    
    // Mostrar spinner de carregamento
    showLoadingSpinner();
    
    // Carregar nova playlist
    if (player && player.loadVideoById) {
        try {
            player.loadVideoById(playlists[category][0].id);
            // Simular carregamento com delay para melhor UX
            setTimeout(() => {
                loadPlaylist();
                updateTrackInfo();
                hideLoadingSpinner();
            }, 1200);
        } catch (error) {
            console.error('Erro ao carregar v√≠deo:', error);
            hideLoadingSpinner();
        }
    } else {
        // Se o player n√£o estiver pronto, apenas atualizar a interface
        setTimeout(() => {
            loadPlaylist();
            updateTrackInfo();
            hideLoadingSpinner();
        }, 1200);
    }
}

// Fun√ß√£o para carregar playlist na interface
const searchInput = document.getElementById("searchInput");

function loadPlaylist(filterText = "") {
    playlistContainer.innerHTML = '';
    const currentPlaylist = playlists[currentCategory];

    currentPlaylist
        .filter(track => 
            track.title.toLowerCase().includes(filterText.toLowerCase()) || 
            track.description.toLowerCase().includes(filterText.toLowerCase())
        )
        .forEach(track => {
            const playlistItem = document.createElement('div');
            const realIndex = currentPlaylist.indexOf(track); // √≠ndice real na playlist original

            playlistItem.className = `playlist-item ${realIndex === currentTrackIndex ? 'active' : ''}`;
            playlistItem.innerHTML = `
                <div class="track-info">
                    <div class="track-title">${track.title}</div>
                    <div class="track-duration">${track.duration}</div>
                </div>
            `;
            playlistItem.addEventListener('click', () => playTrack(realIndex));
            playlistContainer.appendChild(playlistItem);
        });
}




// Atualiza lista conforme o usu√°rio digita
searchInput.addEventListener("input", () => {
    loadPlaylist(searchInput.value);
});


// Fun√ß√£o para tocar uma faixa espec√≠fica
function playTrack(index) {
    currentTrackIndex = index;
    const track = playlists[currentCategory][index];
    
    if (player) {
        // Mostrar feedback visual durante carregamento da m√∫sica
        showTrackLoadingFeedback();
        
        player.loadVideoById(track.id);
        updateTrackInfo();
        updatePlaylistHighlight();
        
        // Esconder feedback ap√≥s um breve delay
        setTimeout(() => {
            hideTrackLoadingFeedback();
        }, 500);
    }
}

// Fun√ß√£o para atualizar informa√ß√µes da faixa atual
function updateTrackInfo() {
    const track = playlists[currentCategory][currentTrackIndex];
    trackTitle.textContent = track.title;
    trackDescription.textContent = track.description;
}

// Fun√ß√£o para atualizar destaque na playlist
function updatePlaylistHighlight() {
    const playlistItems = document.querySelectorAll('.playlist-item');
    playlistItems.forEach((item, index) => {
        item.classList.toggle('active', index === currentTrackIndex);
    });
}

// Fun√ß√£o para alternar play/pause
function togglePlayPause() {
    if (!player) return;
    
    if (isPlaying) {
        player.pauseVideo();
    } else {
        player.playVideo();
    }
}

// Fun√ß√£o para atualizar bot√£o play/pause
function updatePlayPauseButton() {
    const icon = playPauseBtn.querySelector('i');
    if (isPlaying) {
        icon.className = 'fas fa-pause';
    } else {
        icon.className = 'fas fa-play';
    }
}

// Fun√ß√£o para faixa anterior
function previousTrack() {
    const playlistLength = playlists[currentCategory].length;
    currentTrackIndex = (currentTrackIndex - 1 + playlistLength) % playlistLength;
    playTrack(currentTrackIndex);
}

// Fun√ß√£o para pr√≥xima faixa
function nextTrack() {
    const playlistLength = playlists[currentCategory].length;
    currentTrackIndex = (currentTrackIndex + 1) % playlistLength;
    playTrack(currentTrackIndex);
}

// Fun√ß√£o para alternar mute
function toggleMute() {
    if (!player) return;
    
    if (isMuted) {
        player.setVolume(currentVolume);
        muteBtn.querySelector('i').className = 'fas fa-volume-up';
        isMuted = false;
    } else {
        player.setVolume(0);
        muteBtn.querySelector('i').className = 'fas fa-volume-mute';
        isMuted = true;
    }
}

// Fun√ß√£o para mudar volume
function changeVolume() {
    currentVolume = volumeSlider.value;
    if (player && !isMuted) {
        player.setVolume(currentVolume);
    }
    
    // Atualizar √≠cone do volume
    const icon = muteBtn.querySelector('i');
    if (currentVolume == 0) {
        icon.className = 'fas fa-volume-mute';
    } else if (currentVolume < 50) {
        icon.className = 'fas fa-volume-down';
    } else {
        icon.className = 'fas fa-volume-up';
    }
}

// Fun√ß√£o para buscar posi√ß√£o na m√∫sica
function seekTo(e) {
    if (!player) return;
    
    const rect = progressBar.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    const percentage = clickX / rect.width;
    const duration = player.getDuration();
    const seekTime = duration * percentage;
    
    player.seekTo(seekTime);
}

// Fun√ß√£o para atualizar progresso
function updateProgress() {
    if (!player) return;
    
    try {
        const currentTime = player.getCurrentTime();
        const duration = player.getDuration();
        
        if (duration > 0) {
            const percentage = (currentTime / duration) * 100;
            progress.style.width = percentage + '%';
            
            currentTimeSpan.textContent = formatTime(currentTime);
            durationSpan.textContent = formatTime(duration);
        }
    } catch (error) {
        // Ignorar erros de API
    }
}

// Fun√ß√£o para formatar tempo
function formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    
    if (hours > 0) {
        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    } else {
        return `${minutes}:${secs.toString().padStart(2, '0')}`;
    }
}

// Fun√ß√£o para iniciar atualiza√ß√£o de progresso
function startProgressUpdate() {
  
    progressInterval = setInterval(updateProgress, 1000);
}

// Fun√ß√£o para mostrar spinner de carregamento
function showLoadingSpinner() {
    const loadingSpinner = document.getElementById('loadingSpinner');
    const playlist = document.getElementById('playlist');
    const spinnerText = loadingSpinner?.querySelector('p');
    
    if (loadingSpinner && playlist) {
        loadingSpinner.style.display = 'flex';
        playlist.style.display = 'none';
        
        // Atualizar texto do spinner baseado na categoria
        if (spinnerText) {
            const categoryNames = {
                'Natureza': 'Natureza',
                'Calma': 'M√∫sica Calma',
                'Focado': 'M√∫sica para Foco'
            };
            const categoryName = categoryNames[currentCategory] || 'playlist';
            spinnerText.textContent = `Carregando ${categoryName}...`;
        }
    }
}

// Fun√ß√£o para esconder spinner de carregamento
function hideLoadingSpinner() {
    const loadingSpinner = document.getElementById('loadingSpinner');
    const playlist = document.getElementById('playlist');
    
    if (loadingSpinner && playlist) {
        loadingSpinner.style.display = 'none';
        playlist.style.display = 'block';
    }
}

// Fun√ß√£o para mostrar feedback de carregamento de m√∫sica
function showTrackLoadingFeedback() {
    const trackTitle = document.getElementById('trackTitle');
    const trackDescription = document.getElementById('trackDescription');
    
    if (trackTitle && trackDescription) {
        trackTitle.style.opacity = '0.5';
        trackDescription.style.opacity = '0.5';
        trackDescription.textContent = 'Carregando m√∫sica...';
    }
}

// Fun√ß√£o para esconder feedback de carregamento de m√∫sica
function hideTrackLoadingFeedback() {
    const trackTitle = document.getElementById('trackTitle');
    const trackDescription = document.getElementById('trackDescription');
    
    if (trackTitle && trackDescription) {
        trackTitle.style.opacity = '1';
        trackDescription.style.opacity = '1';
    }
}

// Atalhos de teclado
document.addEventListener('keydown', (e) => {
  
    if (playerPopup.classList.contains('active')) {
        switch(e.code) {
            case 'Space':
                e.preventDefault();
                togglePlayPause();
                break;
            case 'ArrowLeft':
                e.preventDefault();
                previousTrack();
                break;
            case 'ArrowRight':
                e.preventDefault();
                nextTrack();
                break;
            case 'ArrowUp':
                e.preventDefault();
                volumeSlider.value = Math.min(100, parseInt(volumeSlider.value) + 10);
                changeVolume();
                break;
            case 'ArrowDown':
                e.preventDefault();
                volumeSlider.value = Math.max(0, parseInt(volumeSlider.value) - 10);
                changeVolume();
                break;
            case 'KeyM':
                e.preventDefault();
                toggleMute();
                break;
            case 'Escape':
                e.preventDefault();
                //closePlayer();
                break;
        }
    }
});

// Inicializa√ß√£o quando a p√°gina carrega
document.addEventListener('DOMContentLoaded', () => {
    // Configurar volume inicial
    volumeSlider.value = currentVolume;
    
    // Verificar se deve iniciar automaticamente
    const urlParams = new URLSearchParams(window.location.search);
    const autoplay = urlParams.get('autoplay');
    
    if (autoplay === 'true') {
        // Aguardar o player estar pronto e iniciar automaticamente
        setTimeout(() => {
            if (player && player.playVideo) {
                player.playVideo();
            }
        }, 2000);
    }
    
    // Adicionar efeitos visuais
    addVisualEffects();
    
    // Notificar janela pai que o player foi carregado
    if (window.opener) {
        try {
            window.opener.postMessage({type: 'player-loaded'}, '*');
        } catch (e) {
            console.log('N√£o foi poss√≠vel comunicar com a janela pai');
        }
    }
});

// Fun√ß√£o para adicionar efeitos visuais
function addVisualEffects() {
  
    // Efeito de part√≠culas no fundo (opcional)
    const canvas = document.createElement('canvas');
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    canvas.style.pointerEvents = 'none';
    canvas.style.zIndex = '-1';
    document.body.appendChild(canvas);
    
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const particles = [];
    
    for (let i = 0; i < 50; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 0.5,
            vy: (Math.random() - 0.5) * 0.5,
            size: Math.random() * 2 + 1,
            opacity: Math.random() * 0.5 + 0.2
        });
    }
    
    function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach(particle => {
            particle.x += particle.vx;
            particle.y += particle.vy;
            
            if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
            if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;
            
            ctx.beginPath();
            ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 255, 255, ${particle.opacity})`;
            ctx.fill();
        });
        
        requestAnimationFrame(animateParticles);
    }
    
    animateParticles();
    
    // Redimensionar canvas quando a janela muda de tamanho
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
}



// Chama a fun√ß√£o assim que a p√°gina carrega
document.addEventListener("DOMContentLoaded", atualizarBotaoVoltar);

</script>


</html>

